___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "categories": [
    "REMARKETING",
    "ANALYTICS",
    "ADVERTISING"
  ],
  "version": 1,
  "securityGroups": [],
  "displayName": "RTB House - Single Tag",
  "brand": {
    "id": "github.com_House-of-Rezac",
    "displayName": "House-of-Rezac",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "@version 2020-07-23",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "id",
    "displayName": "ID",
    "simpleValueType": true,
    "alwaysInSummary": true
  },
  {
    "type": "TEXT",
    "name": "pageType",
    "displayName": "Page Type",
    "simpleValueType": true
  },
  {
    "type": "SELECT",
    "name": "productIds",
    "displayName": "Product IDs",
    "macrosInSelect": true,
    "selectItems": [],
    "simpleValueType": true,
    "help": "Array of products IDs relevant in given context"
  },
  {
    "type": "SELECT",
    "name": "orderId",
    "displayName": "Order ID",
    "macrosInSelect": true,
    "selectItems": [],
    "simpleValueType": true,
    "help": "Order ID (string | int) on purchase page, null otherwise"
  },
  {
    "type": "SELECT",
    "name": "orderRevenue",
    "displayName": "Order Revenue",
    "macrosInSelect": true,
    "selectItems": [],
    "simpleValueType": true,
    "help": "Order revenue (float | int) on purchase page, null otherwise"
  },
  {
    "type": "TEXT",
    "name": "category",
    "displayName": "Category",
    "simpleValueType": true,
    "help": "Category identification submitted to tracking code on category pages"
  },
  {
    "type": "TEXT",
    "name": "checkoutStep",
    "displayName": "Checkout Step",
    "simpleValueType": true
  },
  {
    "type": "GROUP",
    "name": "advanced",
    "displayName": "Advanced",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "pageUrl",
        "displayName": "Page URL",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "referrer",
        "displayName": "Document Referrer",
        "simpleValueType": true
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const injectHiddenIframe = require('injectHiddenIframe');
const encodeUriComponent = require('encodeUriComponent');
const makeString = require('makeString');
const localStorage = require('localStorage');
const Math = require('Math');
const generateRandom = require('generateRandom');
const getUrl = require('getUrl');
const getReferrerUrl = require('getReferrerUrl');
const getTimestampMillis = require('getTimestampMillis');

log('RTB House =', data);
log(localStorage);
let lid = localStorage.getItem('__rtbhouse.lid');
if (!lid) {
  lid = ""; 
  let pool = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  for (var i = 0; i < 20; i++) lid += pool.charAt(Math.floor(generateRandom(0, pool.length -1)));
  localStorage.setItem('__rtbhouse.lid', lid);
}

let sr = encodeUriComponent(data.referrer || getReferrerUrl() || "");
let su = encodeUriComponent(data.pageUrl || getUrl() || "");
let timeStamp = encodeUriComponent('' + getTimestampMillis());

let specific = '';

const prodIds = data.productIds;
let serializeIds = function(arr) {
  let res = [];
  for (let i = 0; i < arr.length; i++) {
    res.push(makeString(arr[i]));
  }
  return res.join(',');
};


switch (data.pageType) {
  case 'home':
  case 'homepage':
    /**
     * Home Page code
     *    _home
     */
    specific = '_home';
    break;
    
    
  case 'list':
  case 'product.list':
    /**
     * Category Page code
     * The {CatID} macro should be replaced with ID of the particular category. If you cannot pass the
     * category ID, please contact RTB House to get individual guidance.
     *    _category2_{CatID}
     */ 
    specific = '_category2_' + data.category;
    break;
    
    
  case 'product':
  case 'detail':
  case 'product.detail':
    /**
     * Product Page code
     * The {ID} macro should be replaced with unique product ID.
     * NOTE: the product ID inserted in the place of {ID} macro should always be the same as featured in the product feed.
     *    _offer_{ID}
     */
    specific = '_offer' + makeString(prodIds.length ? ('_' + prodIds[0]) : '');
    break;

    
  case 'searchresults':
  case 'list.searchresults':
    /**
     * Search Result Page code
     * you should insert IDs of products displayed on the page. The list can contain up to 5 IDs; the IDs
     * exceeding this limit will be ignored.
     *    _listing_{ID},{ID},{ID},{ID},{ID}
     */
    specific = '_listing_' + serializeIds(prodIds.slice(0, 5));
    break;
    
    
  case 'cart':
  case 'checkout':
    
    
    /**
     * If there are no products in basket -> run "other" page code
     * 
     */
    if (prodIds.length === 0) {
      specific = '';
    
      
    /**
     * Shopping Cart code
     * The {ID} macros should be replaced with IDs of all products that can be currently found in the 
     * shopping cart (regardless of the amount added).
     *    _basketstatus_{ID},{ID},{ID}
     */
    } else if (data.checkoutStep == 1) {
      specific = '_basketstatus_' + serializeIds(prodIds);
    }
    
    
    /**
     * Order Process Start code
     * This code should be pasted into the page which begins order processing (i.e. the checkout page
     * displayed after creating and filling the shopping cart). This is typically the contact details
     * form or any other page displayed after clicking the “Go to checkout” or similar button.
     *    _startorder
     */
    else if (data.checkoutStep == 2) {
      specific = '_startorder';
    }
    
    
    /**
     * Page not matched any criteria for checkout tracking -> run "other" page code
     */
    else {
      specific = '';
    }

    
    break;
    
    
  case 'purchase':
    /**
     * Shopping Cart code
     * The {VALUE} macro should be replaced with the value of the order. This value should only be
     * formatted with the decimal point (dot or comma), without the thousands separator. The {ORDERID} 
     * macro should be replaced with the internal (shop) order identifier. Each consecutive {ID} macro
     * should be replaced with IDs of products that are currently in the shopping cart.
     *   _orderstatus2_{VALUE}_{ORDERID}_{ID},{ID},{ID}&cd=default
     */
    
    specific = '_orderstatus2_' + makeString(data.orderRevenue) + '_' + makeString(data.orderId) + '_' + serializeIds(prodIds) + '&cd=default';
    break;
    
    
  default:
    specific = '';
}



let url = 'https://creativecdn.com/tags?type=iframe' + '&su=' + su + '&sr=' + sr + '&ts=' + timeStamp + '&id=' + encodeUriComponent('pr_'+data.id+specific) + '&id=' +encodeUriComponent('pr_'+data.id+'_lid_'+lid);   

injectHiddenIframe(url, () => {
  data.gtmOnSuccess();
  log('RTB House Success', url);
});


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_hidden_iframe",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://creativecdn.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_referrer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_local_storage",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "__rtbhouse.lid"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Page - Home
  code: |-
    const expectedUrl = 'https://creativecdn.com/tags?type=iframe';
    const mockData = {
      'id': 'aaaaaaaaaaaaaaaaaaaa',
      'pageType': 'home',
      'productIds': [],
      'orderId': undefined,
      'orderRevenue': undefined
    };

    mock('getTimestampMillis', 123456789);

    mock('injectHiddenIframe', function(url, success) {
      assertThat(url).contains(expectedUrl);
      success();
    });
    runCode(mockData);
    assertApi('injectHiddenIframe').wasCalled();
- name: Page - List
  code: |-
    const expectedUrl = 'https://creativecdn.com/tags?type=iframe';
    const mockData = {
      'id': 'aaaaaaaaaaaaaaaaaaaa',
      'pageType': 'list',
      'productIds': [],
      'orderId': undefined,
      'orderRevenue': undefined,
      'category': 'Category 1/Category 2'
    };

    mock('getTimestampMillis', 123456789);

    mock('injectHiddenIframe', function(url, success) {
      assertThat(url).contains(expectedUrl);
      success();
    });
    runCode(mockData);
    assertApi('injectHiddenIframe').wasCalled();
- name: Page - Product Detail
  code: |-
    const expectedUrl = 'https://creativecdn.com/tags?type=iframe';
    const mockData = {
      'id': 'aaaaaaaaaaaaaaaaaaaa',
      'pageType': 'product',
      'productIds': [123],
      'orderId': undefined,
      'orderRevenue': undefined,
      'category': 'Category 1/Category 2'
    };

    mock('getTimestampMillis', 123456789);

    mock('injectHiddenIframe', function(url, success) {
      assertThat(url).contains(expectedUrl);
      success();
    });
    runCode(mockData);
    assertApi('injectHiddenIframe').wasCalled();
- name: Page - Search Results
  code: |-
    const expectedUrl = 'https://creativecdn.com/tags?type=iframe';
    const mockData = {
      'id': 'aaaaaaaaaaaaaaaaaaaa',
      'pageType': 'searchresults',
      'productIds': [1,2,3,4,5,6,7,8,9],
      'orderId': undefined,
      'orderRevenue': undefined,
      'category': 'Category 1/Category 2'
    };

    mock('getTimestampMillis', 123456789);

    mock('injectHiddenIframe', function(url, success) {
      assertThat(url).contains(expectedUrl);
      success();
    });
    runCode(mockData);
    assertApi('injectHiddenIframe').wasCalled();
- name: Page - Shopping Cart
  code: |-
    const expectedUrl = 'https://creativecdn.com/tags?type=iframe';
    const mockData = {
      'id': 'aaaaaaaaaaaaaaaaaaaa',
      'pageType': 'cart',
      'productIds': [1,2,3],
      'orderId': undefined,
      'orderRevenue': undefined,
      'category': 'Category 1/Category 2',
      'checkoutStep': 1
    };

    mock('getTimestampMillis', 123456789);

    mock('injectHiddenIframe', function(url, success) {
      assertThat(url).contains(expectedUrl);
      success();
    });
    runCode(mockData);
    assertApi('injectHiddenIframe').wasCalled();
- name: Page - Initiate Checkout
  code: |-
    const expectedUrl = 'https://creativecdn.com/tags?type=iframe';
    const mockData = {
      'id': 'aaaaaaaaaaaaaaaaaaaa',
      'pageType': 'cart',
      'productIds': [1,2,3],
      'orderId': undefined,
      'orderRevenue': undefined,
      'category': 'Category 1/Category 2',
      'checkoutStep': 2
    };

    mock('getTimestampMillis', 123456789);

    mock('injectHiddenIframe', function(url, success) {
      assertThat(url).contains(expectedUrl);
      success();
    });
    runCode(mockData);
- name: Page - Payment Info
  code: |-
    const expectedUrl = 'https://creativecdn.com/tags?type=iframe';
    const mockData = {
      'id': 'aaaaaaaaaaaaaaaaaaaa',
      'pageType': 'cart',
      'productIds': [1,2,3],
      'orderId': undefined,
      'orderRevenue': undefined,
      'category': 'Category 1/Category 2',
      'checkoutStep': 3
    };

    mock('getTimestampMillis', 123456789);

    mock('injectHiddenIframe', function(url, success) {
      assertThat(url).contains(expectedUrl);
      success();
    });
    runCode(mockData);
- name: Page - Purchase
  code: |-
    const expectedUrl = 'https://creativecdn.com/tags?type=iframe';

    const mockData = {
      'id': 'aaaaaaaaaaaaaaaaaaaa',
      'pageType': 'purchase',
      'productIds': [1,2,3],
      'orderId': 'TR7890',
      'orderRevenue': 198.30,
      'category': 'Category 1/Category 2'
    };

    mock('getTimestampMillis', 123456789);

    mock('injectHiddenIframe', function(url, success) {
      assertThat(url).contains(expectedUrl);
      success();
    });
    runCode(mockData);
- name: Page - Other
  code: |-
    const expectedUrl = 'https://creativecdn.com/tags?type=iframe';
    const mockData = {
      'id': 'aaaaaaaaaaaaaaaaaaaa',
      'pageType': 'other',
      'productIds': [1,2,3],
      'orderId': 'TR7890',
      'orderRevenue': 198.30,
      'category': 'Category 1/Category 2'
    };

    mock('getTimestampMillis', 123456789);

    mock('injectHiddenIframe', function(url, success) {
      assertThat(url).contains(expectedUrl);
      success();
    });
    runCode(mockData);
    assertApi('injectHiddenIframe').wasCalled();
setup: ''


___NOTES___

Created on 29. 7. 2020 12:17:02
